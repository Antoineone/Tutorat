<!DOCTYPE html>
<html>

{% with name="Administration" %}{% include "mise_en_page/HEAD.html" %}{% endwith %}

<body>

{% include 'mise_en_page/HEADER.html' %}


<div class="header">
    <div>
        <div id="header_icon"></div>
        <nav>
            <ul>
                <li><a href="/admin/tutorials/validate">A valider</a></li>
                <li><a href="/admin/tutorials/progress">En cours</a></li>
                <li><a href="/admin/users">Utilisateurs</a></li>
            </ul>
        </nav>
        <div id="header_icon" class="icon">
            <a href="/admin/tutorials/validate?reset_msg=True" class="admin" title="Réinitialiser le site"><img
                    src="/static/img/reset.png"></a>
        </div>
    </div>
</div>


{% include '/blocs/search_user.html' %}


<aside>
    <a href="/admin/tutorials/progress">
        <button>Offres</button>
    </a>
    <a href="/admin/tutorials/progress/demandes">
        <button>Demandes</button>
    </a>
</aside>

<!-- Liste des offres -->
<div class="offres" id="tutorat_en_cours">
    <h2>{{ tutorats_actifs|length }} offre{% if tutorats_actifs|length>1 %}s{% endif %} en cours</h2>
    {% if tutorats_actifs|length>0 %}
        {% for offre in tutorats_actifs %}
            <br/>
            <div class="bloc">
                <div class="info">
                    <p class="element"><strong class="G">Auteur :</strong>
                        <a onclick="open_profile_page('{{ offre.auteur }}')"
                           title="Voir le profil">{{ sql_obj.get_user_pseudo(offre.auteur) }}</a>
                    </p>
                    <p class="element"><strong class="G">Pour des :</strong> {{ offre.filiere }}</p>
                    <p class="element"><strong class="G">Matière :</strong> {{ offre.classe }}</p>
                    
                    <p class="element"><strong class="G">Participant{% if offre.participant is not none and offre.participant2 is not none%}s{% endif %} :</strong>
                        {% if offre.participant is none  and offre.participant2 is none %}
                        	aucun
                        {% else %}
                        	<ul>
	                        {% for p in [offre.participant, offre.participant2] %}
								{% if p is not none %}
									<li>
									<a onclick="open_profile_page('{{ p }}')"
		                               title="Voir le profil">{{ sql_obj.get_user_pseudo(p) }}</a>
		                            </li>
		                        {% endif %}
	                        {% endfor %}
	                        </ul>
                        {% endif %}
                    </p>
                    
                </div>
                <div id="horaires">
                    <p class="date_creation">Créée le {{ offre.date_time.strftime('%d/%m/%Y') }}</p>
                    <div class="horaire">
                        <div class="table" id="jour-offre">
                            {% for i in range(0,6) %}
                                <p>{{ days[i] }}</p>
                            {% endfor %}
                        </div>
                        <div class="table" id="table_horaires">
                            <table class="heure-table">
                                <tr>
                                    <th>08h</th> <th></th> <th>09h</th> <th></th> <th>10h</th> <th></th>
                                    <th>11h</th> <th></th> <th>12h</th> <th></th> <th>13h</th>
                                    <th></th> <th>14h</th> <th></th> <th>15h</th> <th></th>
                                    <th>16h</th> <th></th> <th>17h</th> <th></th> <th>18h</th> <th></th>
                                </tr>
                            </table>
                            {% for i in range(0,6) %}
                                <table>
                                    <tr>
                                        {% for H in (offre.horaires|list)[i*22:(i + 1)*22] %}
                                            {% if (H|int) == 0 %}
                                                <td class="white" title="{{ get_crenau(loop.index) }}"></td>
                                            {% elif (H|int) == 1 %}
                                                <td class="red" title="{{ get_crenau(loop.index) }}"></td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                </table>
                            {% endfor %}
                        </div>
                    </div>
                    <a href="/delete2?id={{ offre.id }}">
                        <button>Supprimer</button>
                    </a>
                </div>
            </div>
            <br/>
        {% endfor %}
    {% else %}
        <div class="bloc" id="none_offre">
            <p class="none_offre">Aucune offre n'a été trouvé</p>
        </div>
    {% endif %}
</div>

{% include 'mise_en_page/FOOTER.html' %}

</body>
</html>
